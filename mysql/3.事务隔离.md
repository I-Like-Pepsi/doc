# 事务隔离

## 标准的隔离级别

- 读未提交

- 读已提交

- 可重复读

- 串行化

## 事务隔离的实现

在Mysql中，实际上每条记录在更新的时候都会同时记录一条回滚操作。记录上的最新值通过回滚操作都可以得到前一个状态的值。

对于不同时刻启动的事务会有不同的read-view，同一条记录在系统中可以存在多个版本，就是数据库的多版本并发控制（MVCC）。

回滚日志不会一直保留，当没有事务需要用到这些回滚日志时，回滚日志就会被删除。如果存在一个长事务，系统里面会保存很老的事务视图，由于这些事务随时可能访问数据库里面的任何数据，所以在这个事务提交之前，数据库里面它可能用到的回滚记录都必须保留，就会导致占用大量空间，所以应该避免使用长事务。在5.5之前的版本，回滚日志是跟数据字段一起存在ibdata文件里面，即使长事务最终被提交，回滚段被清理，文件也不会提交。
